(function(b){b.openModal=function(a){function g(){null!==popup&&popup.fadeOut(a.duration,function(){b(this).remove()});null!==d&&d.fadeOut(a.duration,function(){b(this).remove()});if(null!==a.onClose)a.onClose(e)}function h(){if(null!==popup){var a=(b(window).height()-popup.outerHeight())/2;10>a&&(a=10);var c=(b(window).width()-popup.outerWidth())/2;10>c&&(c=10);popup.css({top:a,left:c})}}function i(){(a.buttonOk||a.buttonCancel)&&popup.find("#"+a.cssId+"_buttons").css("display","block");a.buttonOk||
popup.find("#"+a.cssId+"_buttonok").css("display","none");a.buttonCancel||popup.find("#"+a.cssId+"_buttonCancel").css("display","none")}var a=b.extend({duration:250,onLoad:null,onSuccess:null,onCancel:null,onClose:null,onError:null,html:"",img:"",url:"",width:400,buttonOk:!0,buttonCancel:!1,cssId:"openmodal",loaderUrl:"ajax-loader.gif",l10n:{lang_ok:"Ok",lang_cancel:"Cancel"}},a),e=this,f=null,d=null,c="",c='<div id="'+a.cssId+'">',c=c+('<div id="'+a.cssId+'_content"></div>'),c=c+('<div id="'+a.cssId+
'_buttons">'),c=c+('<a href="#" id="'+a.cssId+'_buttonok">'+a.l10n.lang_ok+"</a>"),c=c+('<a href="#" id="'+a.cssId+'_buttoncancel">'+a.l10n.lang_cancel+"</a>"),c=c+"</div>";this.buttonOkText=function(b){if(null!==popup){if(void 0===b)return popup.find("#"+a.cssId+"_buttonok").html();popup.find("#"+a.cssId+"_buttonok").html(b);return!0}return!1};this.buttonCancelText=function(b){if(null!==popup){if(void 0===b)return popup.find("#"+a.cssId+"_buttoncancel").html();popup.find("#"+a.cssId+"_buttoncancel").html(b);
return!0}return!1};this.DOMObject=function(){return null};b("body").append('<div id="'+a.cssId+'_background"></div>');d=b("#"+a.cssId+"_background");d.fadeOut(0);/Firefox/.test(navigator.userAgent)?d.css({"background-image":"-moz-radial-gradient(center 45deg, ellipse farthest-corner, rgb(150,150,150) 0%, rgb(60,60,60) 50%, rgb(0,0,0) 100%)"}):/Chrome/.test(navigator.userAgent)&&d.css({background:"-webkit-gradient(radial, 50% 50%, 0, 50% 50%, 500, from(rgb(150,150,150)), to(rgb(0,0,0)))"});!a.buttonok&&
!a.buttonCancel&&!a.fixedWindow&&d.click(g);d.fadeTo(a.duration,0.5);b("body").append(c);popup=b("#"+a.cssId);popup.fadeOut(0);f=popup.find("#"+a.cssId+"_content");if(null!==a.url&&""!==a.url)f.html('<img src="'+a.loaderUrl+'">'),popup.width(32),h(),popup.fadeIn(a.duration),b.ajax({url:a.url,cache:!1,type:"GET",success:function(b){f.html(b);showButtons();popup.width(a.width);centerPopup();if(null!==a.onLoad)a.onLoad(e)},error:function(b,c,d){f.html(a.url+": "+d);showButtons();popup.width(a.width);
h();if(null!==a.onError)a.onError(e)}});else if(null!==a.html&&""!==a.html){if(f.html(a.html),i(),popup.width(a.width),h(),popup.fadeIn(a.duration),null!==a.onLoad)a.onLoad(e)}else null!==a.img&&""!==a.img&&(popup.css("position","fixed"),f.html('<img src="'+a.loaderUrl+'">'),i(),popup.width(32),h(),popup.fadeIn(a.duration),c=b("<img>"),c.load(function(){b(this).unbind("load");f.empty().append(b(this));b(this).css("margin",0);var c=b(this).width(),d=b(this).height();c>b(window).width()-80&&(d=d*(b(window).width()-
80)/c,c=b(window).width()-80);d>b(window).height()-80&&(c=c*(b(window).height()-80)/d,d=b(window).height()-80);popup.width(c).height(d+popup.find("#"+a.cssId+"_buttons").outerHeight());b(this).width(c).height(d);h();if(null!==a.onLoad)a.onLoad(e)}),c.attr("src",a.img));a.buttonOk&&popup.find("#"+a.cssId+"_buttonok").click(function(){null!==a.onSuccess?!1!==a.onSuccess(e)&&g():g();return!1});a.buttonCancel&&popup.find("#"+a.cssId+"_buttoncancel").click(function(){null!==a.onCancel?!1!==a.onCancel(e)&&
g():g();return!1});return this}})(jQuery);
